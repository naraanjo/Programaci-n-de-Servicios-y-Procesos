package ejercicio1;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.util.Scanner;

public class LanzadorVocales1 {
	Scanner teclado = new Scanner(System.in);
	
	public void LanzarContadorVocales(String rutaEntrada, String rutaSalida) throws IOException {
		
		
		// Control de que exista el archivo de entrada
		File entrada = new File(rutaEntrada);
		if(!entrada.exists()) {
			throw new IOException("Archivo no encontrado || No existe");
		}
		
		// Clase que cuenta las vocales
		File path = new File(".\\bin");
		String clase = "ejercicio1.ContadorVocales1";
		
		
		
		
		// Inicio el proceso
		ProcessBuilder pb = null;
		try {
			
			pb = new ProcessBuilder("java", "-cp", path.getAbsolutePath(), clase, rutaEntrada, rutaSalida);
			pb.redirectError(new File("src/ejercicio1/ErrorVocales.txt")); // Archivo con los errores
			pb.redirectErrorStream(true);
		}catch(Exception e ) {
			e.printStackTrace();
		}
		
		// Creacion del proceso
		try {
			Process proceso = pb.start();
			
			System.out.println("Introduce una vocal, se realizara un conteo de sus apariciones");
			String vocal = teclado.nextLine();
			
			// Envio la vocal al proceso hijo
			try(BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(proceso.getOutputStream()))){
				
				bw.write(vocal);
				bw.newLine();
				bw.flush();
			}
			
			
		}catch(Exception e ) {
			e.printStackTrace();
		}
		
		
	}	
	
	
	

	public static void main(String[] args) throws IOException {

		LanzadorVocales1 l = new LanzadorVocales1();
		l.LanzarContadorVocales("src/ejercicio1/entrada.txt", "src/ejercicio1/salida.txt");
	}

}
